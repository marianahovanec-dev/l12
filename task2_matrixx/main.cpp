#include <iostream>
#include <fstream> // Для роботи з файлами
using namespace std;

int main() {

    ifstream inputFile("matrix.txt"); // Створюємо об'єкт для читання та відкриваємо файл

    if (!inputFile.is_open()) {
        cerr << "Помилка: Не вдалося відкрити файл matrix.txt. Переконайтеся, що файл існує і знаходиться в тій же директорії." << endl;
        return 1; // Завершення програми з кодом помилки
    }

    int n, m;

    if (!(inputFile >> n >> m)) {
        cerr << "Помилка: Не вдалося зчитати розміри матриці (N та M) з файлу." << endl;
        return 1;
    }

    cout << "Розмір матриці з файлу: " << n << "x" << m << endl;

   
    if (n <= 0 || m <= 0 || n > 100 || m > 100) {
        cerr << "Помилка: Некоректні розміри матриці (" << n << "x" << m << "). Максимально допустимі 100x100." << endl;
        return 1;
    }

    int A[100][100];

    cout << "Зчитування елементів матриці з файлу..." << endl;
    for (int i = 0; i < n; i++) {
        for (int j = 0; j < m; j++) {
            if (!(inputFile >> A[i][j])) {
                 cerr << "Помилка: Недостатньо елементів у файлі для розміру " << n << "x" << m << ". Зупинка зчитування на елементі [" << i << "][" << j << "]." << endl;
                 return 1;
            }
        }
    }


    inputFile.close();

    int sum = 0;
    cout << "Елементи матриці, що обробляються (з парними індексами):" << endl;
    
 
    for (int i = 0; i < n; i++) {
        for (int j = 0; j < m; j++) {
            
            if (i % 2 == 0 && j % 2 == 0) { 
                sum += A[i][j];
                cout << A[i][j] << " ([" << i << "][" << j << "])" << endl;
            }
        }
    }


    cout << "\nСума елементів з парними індексами = **" << sum << "**" << endl;

    return 0;
}